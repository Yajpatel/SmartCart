{% extends 'base.html' %}
{% load static %}

{% block title %}Home{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'home.css' %}">
{% endblock %}

{% block content %}
<main class="content">
    
    {% for category_name, sites in product_categories.items %}
        
        <h2>Featured {{ category_name }}</h2>

        {% for site_name, products in sites.items %}
            {% if products %}
                <h3>{{ site_name|title }}</h3>
                <div class="product-grid">
                    {% for item in products %}
                        <div class="product-card">
                            <a href="{{ item.link }}" target="_blank" class="product-main-link">
                                
                                {% if item.image_url %}
                                    <img src="{{ item.image_url }}" alt="{{ item.title }}" class="product-image">
                                {% else %}
                                    <div class="product-image-placeholder">No Image Available</div>
                                {% endif %}
                                
                                <div class="product-info">
                                    <h4 class="product-title">{{ item.title|truncatechars:60 }}</h4>
                                    <p class="product-price">{{ item.price }}</p>
                                </div>
                            </a>
                        </div>
                    {% endfor %}
                </div>
            {% endif %}
        {% endfor %}

        <hr style="margin: 40px 0;">

    {% endfor %}

</main>
{% endblock %}